package priv.hkon.theseq.cutscenes;

import priv.hkon.theseq.filters.DarkenFilter;
import priv.hkon.theseq.filters.Filter;
import priv.hkon.theseq.main.Core;
import priv.hkon.theseq.sprites.Player;
import priv.hkon.theseq.sprites.Villager;

public class OpeningScene extends Cutscene {
	
	Player player;
	Villager prophet;
	
	DarkenFilter darkenFilter;
	
	boolean finished = false;

	public OpeningScene(Player player, Villager prophet, Core core) {
		super(core);
		this.player = player;
		this.prophet = prophet;
		
		player.isPartOfCutscene = true;
		prophet.isPartOfCutscene = true;
		darkenFilter = new DarkenFilter(0);
		
	}

	@Override
	public void tick() {
		if(tickCount < 120){
			darkenFilter.darkness = 255 - 2*tickCount;
			core.setCutsceneFilter(darkenFilter);
		}else if(tickCount == 120){
			core.setCutsceneFilter(new Filter());
			finished = true;
			
			player.isPartOfCutscene = false;
			prophet.isPartOfCutscene = false;
		}
		super.tick();
		tickCount++;
	}

	@Override
	public boolean isFinished() {
		return finished;
	}

}
